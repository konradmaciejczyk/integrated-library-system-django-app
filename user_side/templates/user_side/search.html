{% extends 'user_side/base.html' %}
{% load static %}


{% block styles %}<link rel="stylesheet" type="text/css" href="{% static 'user_side/css/search.css' %}" media="screen"> {% endblock styles %}
{% block scripts %}
    <script type="text/javascript">
        //================POP UP=================
        function show_item_pop_up(pop_up_name){
            const div_pop_up = document.getElementById(pop_up_name);
            const div_overlay = document.getElementById("overlay");
            div_pop_up.style.display = 'block';
            div_overlay.style.display = 'block';
        }

        function close_pop_up(pop_up_name){
            const div_pop_up = document.getElementById(pop_up_name);
            const div_overlay = document.getElementById("overlay");
            div_pop_up.style.display = 'none';
            div_overlay.style.display = 'none';
        }
        //================END POP UP=================

        //================CHECKBOXES CONTROL=================
        var item_types;
        var item_length;
        var isAllSelected = true;

        function findCheckboxes(){
            item_types = document.querySelectorAll('[name="item_type"]');
            item_length = item_types.length;
            selectAll();
        }

        
        function selectAll(){                
            item_types.forEach(function(item){
                item.checked = true;
            })
        }

        function deselectAll(){
            item_types[0].checked = true;

            for(var i = 1; i<item_length; i++){
                item_types[i].checked = false;
            }
        }

        function select_deselect(){
            if(isAllSelected){
                deselectAll();
                isAllSelected = !isAllSelected;
            }else{
                selectAll();
                isAllSelected = !isAllSelected;
            }
        }

        function update_checkbox(){
            var checked_counter = 0;

            for(var i=0; i<item_length - 1; i++){
                if(item_types[i].checked === true ){
                    checked_counter++;
                }
            }
            switch(checked_counter){
                case 5:{
                    item_types[item_length - 1].checked = true; break;
                }
                case 0:{
                    item_types[0].checked = true; break;
                }
                default:{
                    item_types[item_length-1].checked = false;
                }
                
            }
        }
        //================END CHECKBOXES CONTROL=================
        window.onload = findCheckboxes            
    </script>
{% endblock scripts %}
{% block content %}
    <section id="filter">    
        <div id="search_tool">
            <input type="text" autocomplete="off" name="search" placeholder="Search in resources" onfocus="this.placeholder=''" onblur="this.placeholder='Search in resources'"/>          
        </div>
        <input type="text" autocomplete="off" placeholder="Enter author name" onfocus="this.placeholder=''" onblur="this.placeholder='Enter author name'">        
        <fieldset>
            <label><input type="checkbox" name="item_type" onclick="update_checkbox()">Books</label>
            <label><input type="checkbox" name="item_type" onclick="update_checkbox()">Movies/Films</label>
            <label><input type="checkbox" name="item_type" onclick="update_checkbox()">Sound Recordings</label>
            <label><input type="checkbox" name="item_type" onclick="update_checkbox()">Images</label>
            <label><input type="checkbox" name="item_type" onclick="update_checkbox()">Articles</label>
            <label><input type="checkbox" name="item_type" onclick="select_deselect()">All</label>
        </fieldset>
        <label id="show_only_available"><input  type="checkbox">show only available items</label>            
        <div id="apply_button">Apply</div> 
    </section>
    <main>
        <span id="search_summary">Phrase: <span class="bold_text">"Krzyżacy"</span> by <span class="bold_text">Henryk Sienkiewicz</span> in set of <span class="bold_text">books</span> and <span class="bold_text">movies/films</span> has given <span class="bold_text">2</span> result(s).</span>
        <div class="result" id="result_1">
            <div class="left_margin">
                <span class="result_no">1.</span>
                <span style="font-family:fontello" class="item_type" title="Book" >&#xe801;</span>
            </div>                
            <div class="result_infos">
                <span class="info"><span class="bold_text">Title:</span> Krzyżacy</span></br>
                <span class="info"><span class="bold_text">Author:</span> Henryk Sienkiewicz (1846 - 1916)</span></br>
                <span class="info"><span class="bold_text">Publication year:</span> 1998</span></br>
                <span class="info bold_text">Status: <span style="color:hsl(130, 69%, 46%)"> Available</span></span></br>
                <span class="show_more_button" onclick="show_item_pop_up('pop_up')">Show more / Add item</span>  
            </div>
            <div class="cover_image"><img src="{% static 'user_side/img/example_cover.jpg' %}" alt="cover picture"/>
                <span style="font-family:fontello" class="item_type" title="Book" onclick="show_item_pop_up('pop_up_cover')">&#xe800;</span></div>
        </div>
        <div class="result" id="result_2">
            <div class="left_margin">
                <span class="result_no">2.</span>
                <span style="font-family:fontello" class="item_type" title="Book" >&#xe801;</span>
            </div>                
            <div class="result_infos">
                <span class="info"><span class="bold_text">Title:</span> Krzyżacy</span></br>
                <span class="info"><span class="bold_text">Author:</span> Henryk Sienkiewicz (1846 - 1916)</span></br>
                <span class="info"><span class="bold_text">Publication year:</span> 1998</span></br>
                <span class="info"><span class="bold_text">Status:</span> <span style="color: hsl(130, 69%, 46%);">Available</span></span></br>
                <span class="show_more_button" onclick="show_item_pop_up('pop_up')">Show more / Add item</span>  
            </div>
            <div class="cover_image"><img src="{% static 'user_side/img/example_cover.jpg' %}" alt="cover picture"/>
                <span style="font-family:fontello" class="item_type" title="Book" onclick="show_item_pop_up('pop_up_cover')">&#xe800;</span></div>
        </div>
        <div class="result" id="result_1">
            <div class="left_margin">
                <span class="result_no">3.</span>
                <span style="font-family:fontello" class="item_type" title="Book" >&#xe801;</span>
            </div>                
            <div class="result_infos">
                <span class="info"><span class="bold_text">Title:</span> Krzyżacy</span></br>
                <span class="info"><span class="bold_text">Author:</span> Henryk Sienkiewicz (1846 - 1916)</span></br>
                <span class="info"><span class="bold_text">Publication year:</span> 1998</span></br>
                <span class="info"><span class="bold_text">Status:</span> <span style="color: hsl(130, 69%, 46%);">Available</span></span></br>
                <span class="show_more_button" onclick="show_item_pop_up('pop_up')">Show more / Add item</span>  
            </div>
            <div class="cover_image"><img src="{% static 'user_side/img/example_cover.jpg' %}" alt="cover picture"/>
                <span style="font-family:fontello" class="item_type" title="Book" onclick="show_item_pop_up('pop_up_cover')">&#xe800;</span></div>
        </div>
    </main>
    <div id="pop_up">
        <div id="pop_up_infos_header">
            <span id="pop_up_title">Krzyżacy</span>
            <div class="pop_up_close" onclick="close_pop_up('pop_up')">x</div>
        </div>
        <div class="left_margin">
            <span class="result_no">1.</span></br></br>
            <span style="font-family:fontello" class="item_type" title="Book" >&#xe801;</span>
        </div>
            <div id="pop_up_main_content">
                <span class="pop_up_info"><span class="bold_text">Full title: </span>Henryk Sienkiewicz Krzyżacy</span></br>
                <span class="pop_up_info"><span class="bold_text">Type: </span>Book</span></br>
                <span class="pop_up_info"><span class="bold_text">Author: </span>Henryk Sienkiewicz (1846 - 1916)</span></br>
                <span class="pop_up_info"><span class="bold_text">Publication year: </span>1998</span></br>
                <span class="pop_up_info"><span class="bold_text">Publisher: </span>Warszawa : PWW [Philip Wilson Warsaw], (Rzesz : RZG)</span></br>
                <span class="pop_up_info"><span class="bold_text">ISBN: </span>8387571377</span></br>
                <span class="pop_up_info"><span class="bold_text">Description: </span>Lektura kl. VII</span></br>
                <span class="pop_up_info"><span class="bold_text">Condition: </span>Good</span></br>
                <span class="pop_up_info"><span class="bold_text">ID: </span>000257</span></br>   
                <span class="info"><span class="bold_text">Status: </span> <span style="color: hsl(130, 69%, 46%);">Available</span></span>                   
            </div>
        <div id="pop_up_add_item">Add to order list</div>
    </div>
    <div id="pop_up_cover">
        <div class="pop_up_close" onclick="close_pop_up('pop_up_cover')">x</div>
        <img src="{% static 'user_side/img/example_cover.jpg' %}" alt="cover picture"/>
    </div>
    <div id="overlay"></div>
{% endblock content %}